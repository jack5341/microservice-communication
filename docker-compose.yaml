version: "3.9"  # optional since v1.27.0
services:
  api-gateway: 
    image: micro-comn/api-gateway
    environment:
      - PORT=8080
      - CONNECTION_DOMAIN=connection-services:8081
      - POST_DOMAIN=post-service:8082
    ports:
      - "8080:8080"
    build:
      context: ./api-gateway
    networks:
      - connection-network
    restart: always

  connection-services:
    image: micro-comn/connection-service
    build:
      context: ./request-response/connection-service
    environment:
      - PORT=8081
    ports:
      - "8081:8081"
    networks:
      - connection-network
    restart: always

  post-service:
    image: micro-comn/post-service
    build:
      context: ./request-response/post-service
    environment:
      - PORT=8082
    ports:
      - "8082:8082"
    networks:
      - connection-network
    restart: always

networks:
  connection-network: